"use strict";const e=require("vue"),B=require("./message-type.js"),k=require("../../icon/index.js"),m=require("./instance.js"),y=require("../../../../../node_modules/.pnpm/@vueuse_core@10.11.1_vue@3.5.12_typescript@5.6.3_/node_modules/@vueuse/core/index.js"),h=require("../../../../../node_modules/.pnpm/@vueuse_shared@10.11.1_vue@3.5.12_typescript@5.6.3_/node_modules/@vueuse/shared/index.js"),b=["id"],C={key:0,class:"bu-message--content"},L=["innerHTML"],M=e.defineComponent({name:"BuMessage",__name:"message",props:B.messageProps,emits:["destory"],setup(f,{expose:d}){const t=e.ref(!1),r=e.ref(),o=f,a=e.ref(0);let n;const p=e.computed(()=>m.getLastOffset(o.id)),g=e.computed(()=>a.value+i.value),i=e.computed(()=>m.getOffsetOrSpace(o.id,o.offset)+p.value);function v(){n==null||n()}function l(){o.duration!==0&&({stop:n}=h.useTimeoutFn(()=>{u()},o.duration))}function u(){t.value=!1}return e.onMounted(()=>{l(),t.value=!0}),y.useResizeObserver(r,()=>{a.value=r.value.getBoundingClientRect().height}),d({close:u,visible:t,bottom:g}),(s,c)=>(e.openBlock(),e.createBlock(e.Transition,{name:"bu-message-fade",onAfterLeave:c[0]||(c[0]=T=>s.$emit("destroy")),onBeforeLeave:s.onClose},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["bu-message",[`bu-message--${s.type}`,s.showClose?"is-close":""]]),id:s.id,ref_key:"messageRef",ref:r,style:e.normalizeStyle({top:i.value+"px",zIndex:99}),onMouseenter:v,onMouseleave:l},[e.renderSlot(s.$slots,"default",{},()=>[s.dangerouslyUseHTMLString?(e.openBlock(),e.createElementBlock("p",C,e.toDisplayString(s.message),1)):(e.openBlock(),e.createElementBlock("p",{key:1,class:"bu-message--content",innerHTML:s.message},null,8,L))]),s.showClose?(e.openBlock(),e.createBlock(e.unref(k.BuIcon),{key:0,class:"bu-message--close",name:"close",size:16})):e.createCommentVNode("",!0)],46,b),[[e.vShow,t.value]])]),_:3},8,["onBeforeLeave"]))}});module.exports=M;
